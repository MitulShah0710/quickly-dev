Type: AWS::Cognito::UserPool
Properties:
  AccountRecoverySetting:
    RecoveryMechanisms:
      - Name: 'verified_email'
        Priority: 1
      - Name: 'verified_phone_number'
        Priority: 2
  AutoVerifiedAttributes:
    - email
    - phone_number
  AdminCreateUserConfig:
    AllowAdminCreateUserOnly: true
    InviteMessageTemplate: 
      EmailMessage: "<!DOCTYPE html PUBLIC \"-\/\/W3C\/\/DTD XHTML 1.0 Transitional\/\/EN\" \"http:\/\/www.w3.org\/TR\/xhtml1\/DTD\/xhtml1-transitional.dtd\"> <html xmlns=\"http:\/\/www.w3.org\/1999\/xhtml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\"> <head> <meta charset=\"UTF-8\"> <meta content=\"width=device-width, initial-scale=1\" name=\"viewport\"> <meta name=\"x-apple-disable-message-reformatting\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta content=\"telephone=no\" name=\"format-detection\"> <title>Registration<\/title> <style type=\"text\/css\"> body{ width:100%;font-family:arial, 'helvetica neue', helvetica, sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;background-color:#FAFAFA; } h1{ font-style:normal;font-weight:bold; } .padding0{ padding: 0px; margin:0 } .padding5{ padding: 5px; } .padding10{ padding: 5px; } .padding20{ padding: 20px; } .padding_basic{ margin: 0px auto; text-align: center; } .C-CCCCCC{ color:#CCCCCC; } .C-5C68E2{ color:#5C68E2; } .underline{ text-decoration:underline; } .logo{ position:absolute;top: 0px;left: 43.5%; } .logo>img{ display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic; } .body_message{ text-align: center;position:fixed; top: 8%; width:100%;margin-top:50px; } .container{ max-width:650px;max-height:700px; margin: 0 auto; border: 1px solid #cccc; text-align: center;background-color: #FFFFFF;border-radius: 5px; } .container_logo{ margin: 0px auto; text-align: center;color:#333333 } .container-links{ max-width:650px;max-height:700px; margin: 0 auto; } .margin_adjust{ margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none; } .text_adjust14x12{ line-height:14px;font-size:12px } .text_adjust24x16{ line-height:24px;font-size:16px } .text_adjust24x20{ line-height:24px;font-size:20px } .text_adjust21x14{ line-height:21px;font-size:14px } .text_adjust55x46{ line-height:55px;font-size:46px } .text_justify{ text-align: justify; } .text_center{ text-align: center; } .social-media-basic{ padding-right:40px } .social-media-icon{ display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic } .links-col{ margin:0;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;border:0 } .links-a{ -webkit-text-size-adjust:none;-ms-text-size-adjust:none;text-decoration:none;display:block;color:#999999;font-size:12px } .border-left{ border-left:1px solid #cccccc } .border-collapse{ border-collapse:collapse;border-spacing:0px } .delego-link{ text-decoration:none;color:#FFFFFF;border-style:solid;border-color:#5C68E2;border-width:10px 30px 10px 30px;display:inline-block;background:#5C68E2;border-radius:6px;font-weight:normal;font-style:normal;width:auto;border-left-width:30px;border-right-width:30px } .text-bold{ font-weight: bold; } @media only screen and (max-width:600px) { } <\/style> <\/head> <body class=\"padding0\"> <div class=\"logo padding20\"> <img src=\"https:\/\/delego-public-assets.s3.amazonaws.com\/delego-logo.png\" alt=\"Logo\" width=\"200\" title=\"Logo\"> <\/div> <div class=\"body_message\"> <div class=\"container padding20\"> <div class=\"container_logo\"> <img src=\"https:\/\/delego-public-assets.s3.amazonaws.com\/96671618383886503.png\" alt style=\"border:0;outline:none;text-decoration:none;\" width=\"100\"> <\/div> <div class=\"padding_basic\"> <h1 class=\"margin_adjust padding20 text_adjust55x46\">Thanks for joining us!<\/h1> <\/div> <div class=\"padding_basic text_justify padding0\"> <p class=\"margin_adjust text_adjust24x16\">Hello {username}! Thanks for joining us! You can now login to start the&nbsp;task and see it in action! Let's go!<\/p> <\/div> <div class=\"padding_basic padding10\"> <span class=\"padding20\" style=\"border-width:0px;display:inline-block;width:300px;background-color:#e8eafb;border-radius:10px\"> <div style=\"width: 49%;text-align: right;float: left;\"> <p class=\"padding0 text_adjust21x14\">Login:<\/p> <p class=\"padding0 text_adjust21x14\">Password:<\/p> <\/div> <div style=\"width: 49%;text-align: left;float: right;\"> <p class=\"padding0 text_adjust21x14 text-bold\">{username}<\/p> <p class=\"padding0 text_adjust21x14 text-bold\">{####}<\/p> <\/div> <\/span> <\/div> <div class=\"padding_basic padding20\"> <span class=\"padding20\" style=\"border-width:0px;display:inline-block;width:auto\"> <a href=\"https:\/\/${opt:stage}.delego.ai\" class=\"text_center text_adjust24x20 margin_adjust delego-link\" target=\"_blank\">Go to Delego<\/a> <\/span> <\/div> <div class=\"padding_basic text_justify\"> <p class=\"margin_adjust text_adjust21x14\">Got a question? Email us at&nbsp; <a target=\"_blank\" href=\"\" class=\"margin_adjust underline C-5C68E2\">support@intelligisgroup.com<\/a>&nbsp; <\/p> <p class=\"margin_adjust text_adjust21x14\"><br>Thanks,<\/p> <p class=\"margin_adjust text_adjust21x14\">The delego&nbsp;Team!<\/p> <\/div> <\/div> <div class=\"container-links padding20\"> <div class=\"padding_basic padding20\"> <table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" role=\"presentation\" class=\"border-collapse\"> <tr> <td class=\"padding0\" align=\"center\" style=\"padding-top:15px;padding-bottom:15px;font-size:0\"> <table cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" class=\"border-collapse\"> <tr> <td align=\"center\" valign=\"top\" class=\"social-media-basic padding0\"><img title=\"Facebook\" src=\"https:\/\/delego-public-assets.s3.amazonaws.com\/facebook-logo-black.png\" alt=\"Fb\" width=\"32\" class=\"social-media-icon\"><\/td> <td align=\"center\" valign=\"top\" class=\"social-media-basic padding0\"><img title=\"Twitter\" src=\"https:\/\/delego-public-assets.s3.amazonaws.com\/twitter-logo-black.png\" alt=\"Tw\" width=\"32\" class=\"social-media-icon\"><\/td> <td align=\"center\" valign=\"top\" class=\"social-media-basic padding0\"><img title=\"Instagram\" src=\"https:\/\/delego-public-assets.s3.amazonaws.com\/instagram-logo-black.png\" alt=\"Inst\" width=\"32\" class=\"social-media-icon\"><\/td> <td align=\"center\" valign=\"top\" class=\"social-media-basic padding0\"><img title=\"Youtube\" src=\"https:\/\/delego-public-assets.s3.amazonaws.com\/youtube-logo-black.png\" alt=\"Yt\" width=\"32\" class=\"social-media-icon\"><\/td> <\/tr> <\/table> <\/td> <\/tr> <tr> <td class=\"padding0\"> <table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" role=\"presentation\" class=\"border-collapse\"> <tr class=\"links\"> <td align=\"center\" valign=\"top\" width=\"33.33%\" class=\"links-col\"><a target=\"_blank\" href=\"\" class=\"links-a\">Visit Us <\/a><\/td> <td align=\"center\" valign=\"top\" width=\"33.33%\" class=\"links-col border-left\"><a target=\"_blank\" href=\"\" class=\"links-a\">Privacy Policy<\/a><\/td> <td align=\"center\" valign=\"top\" width=\"33.33%\" class=\"links-col border-left\"><a target=\"_blank\" href=\"\" class=\"links-a\">Terms of Use<\/a><\/td> <\/tr> <\/table> <\/td> <\/tr> <\/table> <\/div> <div class=\"padding_basic padding20\"> <p class=\"margin_adjust text_adjust14x12\" style=\"color:#CCCCCC;\">No longer want to receive these emails?&nbsp; <a href=\"\" target=\"_blank\" class=\"margin_adjust text_adjust14x12 C-CCCCCC underline\">Unsubscribe<\/a>. <\/p> <\/div> <\/div> <\/div> <\/body> <\/html>"
  VerificationMessageTemplate:
    DefaultEmailOption: CONFIRM_WITH_LINK
    EmailMessage: "<!DOCTYPE html PUBLIC \"-\/\/W3C\/\/DTD XHTML 1.0 Transitional\/\/EN\" \"http:\/\/www.w3.org\/TR\/xhtml1\/DTD\/xhtml1-transitional.dtd\"><html xmlns=\"http:\/\/www.w3.org\/1999\/xhtml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\"><head><meta charset=\"UTF-8\"><meta content=\"width=device-width,initial-scale=1\" name=\"viewport\"><meta name=\"x-apple-disable-message-reformatting\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><meta content=\"telephone=no\" name=\"format-detection\"><title>Nuevo Password\/Reset<\/title><style type=\"text\/css\">body{width:100%;font-family:arial,'helvetica neue',helvetica,sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;background-color:#fafafa}h1{font-style:normal;font-weight:700}.padding0{padding:0;margin:0}.padding10{padding:10px}.padding20{padding:20px}.padding_basic{margin:0 auto;text-align:center}.C-CCCCCC{color:#ccc}.C-5C68E2{color:#5c68e2}.underline{text-decoration:underline}.logo{position:absolute;top:0;left:43.5%}.logo>img{display:block;border:0;outline:0;text-decoration:none;-ms-interpolation-mode:bicubic}.body_message{text-align:center;position:fixed;top:8%;width:100%;margin-top:50px}.container{max-width:650px;max-height:700px;margin:0 auto;border:1px solid #cccc;text-align:center;background-color:#fff;border-radius:5px}.container_logo{margin:0 auto;text-align:center;color:#333}.container-links{max-width:650px;max-height:700px;margin:0 auto}.margin_adjust{margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none}.text_adjust14x12{line-height:14px;font-size:12px}.text_adjust24x16{line-height:24px;font-size:16px}.text_adjust24x20{line-height:24px;font-size:20px}.text_adjust21x14{line-height:21px;font-size:14px}.text_adjust55x46{line-height:55px;font-size:46px}.text_justify{text-align:justify}.text_center{text-align:center}.social-media-basic{padding-right:40px}.social-media-icon{display:block;border:0;outline:0;text-decoration:none;-ms-interpolation-mode:bicubic}.links-col{margin:0;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;border:0}.links-a{-webkit-text-size-adjust:none;-ms-text-size-adjust:none;text-decoration:none;display:block;color:#999;font-size:12px}.border-left{border-left:1px solid #ccc}.border-collapse{border-collapse:collapse;border-spacing:0}.delego-link{text-decoration:none;color:#fff;border-style:solid;border-color:#5c68e2;border-width:10px 30px 10px 30px;display:inline-block;background:#5c68e2;border-radius:6px;font-weight:400;font-style:normal;width:auto;border-left-width:30px;border-right-width:30px}<\/style><\/head><body class=\"padding0\"><div class=\"logo padding20\"><img src=\"https:\/\/delego-public-assets.s3.amazonaws.com\/delego-logo.png\" alt=\"Logo\" width=\"200\" title=\"Logo\"><\/div><div class=\"body_message\"><div class=\"container padding20\"><div class=\"container_logo\"><img src=\"https:\/\/delego-public-assets.s3.amazonaws.com\/69901618385469411.png\" alt style=\"border:0;outline:0;text-decoration:none\" width=\"100\"><\/div><div class=\"padding_basic\"><h1 class=\"margin_adjust padding20 text_adjust55x46\">Verification code<\/h1><\/div><div class=\"padding_basic text_justify padding0\"><p class=\"margin_adjust text_adjust24x16\"><br>This is you verification code <span style=\"font-size:16px\"><strong>{####}<\/strong><\/span><br>Go to Delego and enter the verification code to reset your password<\/p><\/div><div class=\"padding_basic text_justify padding0\"><p class=\"margin_adjust text_adjust24x16 padding10\"><h3 class=\"margin_adjust padding20 text_center\">This link is valid for one use only. Expires in 2 hours.<\/h3><\/p><p class=\"margin_adjust text_adjust24x16\"><p class=\"margin_adjust padding10 text_justify\">If you didn't request to reset your&nbsp;password, please disregard this message or contact our customer service department.<\/p><\/p><\/div><div class=\"padding_basic padding10\"><span class=\"padding20\" style=\"border-width:0;display:inline-block;width:auto\"><a href=\"https:\/\/${opt:stage}.delego.ai\" class=\"text_center text_adjust24x20 margin_adjust delego-link\" target=\"_blank\">Go to Delego<\/a><\/span><\/div><div class=\"padding_basic text_justify\"><p class=\"margin_adjust text_adjust21x14\">Got a question? Email us at&nbsp;<a target=\"_blank\" href=\"\" class=\"margin_adjust underline C-5C68E2\">support@intelligisgroup.com<\/a>&nbsp;<\/p><p class=\"margin_adjust text_adjust21x14\"><br>Thanks,<\/p><p class=\"margin_adjust text_adjust21x14\">The delego&nbsp;Team!<\/p><\/div><\/div><div class=\"container-links padding20\"><div class=\"padding_basic padding20\"><table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" role=\"presentation\" class=\"border-collapse\"><tr><td class=\"padding0\" align=\"center\" style=\"padding-top:15px;padding-bottom:15px;font-size:0\"><table cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" class=\"border-collapse\"><tr><td align=\"center\" valign=\"top\" class=\"social-media-basic padding0\"><img title=\"Facebook\" src=\"https:\/\/delego-public-assets.s3.amazonaws.com\/facebook-logo-black.png\" alt=\"Fb\" width=\"32\" class=\"social-media-icon\"><\/td><td align=\"center\" valign=\"top\" class=\"social-media-basic padding0\"><img title=\"Twitter\" src=\"https:\/\/delego-public-assets.s3.amazonaws.com\/twitter-logo-black.png\" alt=\"Tw\" width=\"32\" class=\"social-media-icon\"><\/td><td align=\"center\" valign=\"top\" class=\"social-media-basic padding0\"><img title=\"Instagram\" src=\"https:\/\/delego-public-assets.s3.amazonaws.com\/instagram-logo-black.png\" alt=\"Inst\" width=\"32\" class=\"social-media-icon\"><\/td><td align=\"center\" valign=\"top\" class=\"social-media-basic padding0\"><img title=\"Youtube\" src=\"https:\/\/delego-public-assets.s3.amazonaws.com\/youtube-logo-black.png\" alt=\"Yt\" width=\"32\" class=\"social-media-icon\"><\/td><\/tr><\/table><\/td><\/tr><tr><td class=\"padding0\"><table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" role=\"presentation\" class=\"border-collapse\"><tr class=\"links\"><td align=\"center\" valign=\"top\" width=\"33.33%\" class=\"links-col\"><a target=\"_blank\" href=\"\" class=\"links-a\">Visit Us<\/a><\/td><td align=\"center\" valign=\"top\" width=\"33.33%\" class=\"links-col border-left\"><a target=\"_blank\" href=\"\" class=\"links-a\">Privacy Policy<\/a><\/td><td align=\"center\" valign=\"top\" width=\"33.33%\" class=\"links-col border-left\"><a target=\"_blank\" href=\"\" class=\"links-a\">Terms of Use<\/a><\/td><\/tr><\/table><\/td><\/tr><\/table><\/div><div class=\"padding_basic padding20\"><p class=\"margin_adjust text_adjust14x12\" style=\"color:#ccc\">No longer want to receive these emails?&nbsp;<a href=\"\" target=\"_blank\" class=\"margin_adjust text_adjust14x12 C-CCCCCC underline\">Unsubscribe<\/a>.<\/p><\/div><\/div><\/div><\/body><\/html>"
  Policies:
    PasswordPolicy:
      MinimumLength: 8
      RequireLowercase: true
      RequireNumbers: true
      RequireUppercase: true
      RequireSymbols: false
  UsernameConfiguration:
    CaseSensitive: false
  UsernameAttributes:
    - email
    - phone_number
  Schema:
    - AttributeDataType: String
      Name: email
      Required: false
      Mutable: false
    - AttributeDataType: String
      Name: phone_number
      Required: false
      Mutable: false
    - AttributeDataType: String
      Name: given_name
      Required: false
      Mutable: true
    - AttributeDataType: String
      Name: family_name
      Required: false
      Mutable: true
    - AttributeDataType: String
      Name: 'custom:TENANT_HASH'
      Required: false
      Mutable: false
    - AttributeDataType: String
      Name: 'TENANT_HASH'
      Required: false
      Mutable: false
  SmsConfiguration:
    ExternalId: ${self:custom.environment.externalId}
    SnsCallerArn: !GetAtt CognitoSMSRole.Arn
  EmailConfiguration:
    From: Delego Support <${self:custom.environment.fromEmail}>
    EmailSendingAccount: 'DEVELOPER'
    SourceArn: ${self:custom.environment.fromEmailARN}
  MfaConfiguration: 'OPTIONAL'
  EnabledMfas: 
    - 'SMS_MFA'
    - 'SOFTWARE_TOKEN_MFA'
  LambdaConfig:
    PreAuthentication: !GetAtt PreAuthenticationHookLambdaFunction.Arn
